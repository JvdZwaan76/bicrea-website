/* ========================================
   ENHANCED TYPOGRAPHY & WORD BREAKING
   Optimized for BicRea Luxury Website
   FIXED: Heading readability & ADA compliance
======================================== */

/* === ENHANCED CSS CUSTOM PROPERTIES === */
:root {
    /* Advanced Typography Scales */
    --font-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.875rem);
    --font-sm: clamp(0.875rem, 0.8rem + 0.35vw, 1rem);
    --font-base: clamp(1rem, 0.9rem + 0.45vw, 1.125rem);
    --font-lg: clamp(1.125rem, 1rem + 0.55vw, 1.25rem);
    --font-xl: clamp(1.25rem, 1.1rem + 0.65vw, 1.5rem);
    --font-2xl: clamp(1.5rem, 1.3rem + 0.85vw, 2rem);
    --font-3xl: clamp(2rem, 1.7rem + 1.25vw, 2.75rem);
    --font-4xl: clamp(2.5rem, 2rem + 2vw, 3.5rem);
    --font-5xl: clamp(3rem, 2.5rem + 2.5vw, 4.5rem);
    
    /* Enhanced Line Heights for Different Text Types */
    --line-height-tight: 1.2;
    --line-height-snug: 1.3;
    --line-height-normal: 1.5;
    --line-height-relaxed: 1.625;
    --line-height-loose: 1.75;
    
    /* Optimal Reading Widths */
    --measure-narrow: 45ch;
    --measure-base: 65ch;
    --measure-wide: 75ch;
    --measure-loose: 85ch;
    
    /* Advanced Letter Spacing */
    --tracking-tighter: -0.05em;
    --tracking-tight: -0.025em;
    --tracking-normal: 0em;
    --tracking-wide: 0.025em;
    --tracking-wider: 0.05em;
    --tracking-widest: 0.1em;
    
    /* ADA Compliant Colors */
    --ada-black: #000000;
    --ada-white: #ffffff;
    --ada-gray-dark: #333333;
    --ada-gray-medium: #666666;
}

/* === FOUNDATIONAL TYPOGRAPHY RESET === */
* {
    /* Advanced word breaking and text rendering */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    font-feature-settings: "kern" 1, "liga" 1, "calt" 1;
}

html {
    /* Enhanced text size adjustment */
    -webkit-text-size-adjust: 100%;
    -moz-text-size-adjust: 100%;
    text-size-adjust: 100%;
    
    /* Improved hanging punctuation */
    hanging-punctuation: first last;
}

body {
    /* Base typography improvements */
    font-family: var(--font-body);
    font-size: var(--font-base);
    line-height: var(--line-height-relaxed);
    color: var(--text-primary);
    
    /* Enhanced text wrapping */
    text-wrap: pretty;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    
    /* Improved text spacing */
    letter-spacing: var(--tracking-normal);
    
    /* Advanced typography features */
    font-feature-settings: 
        "kern" 1,           /* Kerning */
        "liga" 1,           /* Ligatures */
        "calt" 1,           /* Contextual alternates */
        "case" 1,           /* Case-sensitive forms */
        "frac" 1,           /* Fractions */
        "tnum" 0,           /* Proportional numbers */
        "onum" 1;           /* Old-style numbers */
    
    /* Orphan and widow control */
    orphans: 2;
    widows: 2;
}

/* === USA CALLOUT - ADA COMPLIANT FIX === */
.usa-callout {
    /* Ensure high contrast for ADA compliance */
    background-color: var(--ada-white);
    color: var(--ada-black);
    border: 1px solid var(--ada-gray-medium);
    padding: 0.75rem 1.5rem;
    text-align: center;
    font-size: var(--font-sm);
    font-weight: 600;
    letter-spacing: var(--tracking-wide);
    
    /* Ensure text is always readable */
    text-shadow: none;
    background-image: none;
    
    /* ADA contrast ratio: 21:1 (WCAG AAA) */
    min-height: 44px; /* Minimum touch target */
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
}

.usa-callout span {
    color: var(--ada-black) !important;
    text-shadow: none !important;
    background: transparent !important;
    font-weight: 600;
}

.usa-callout i {
    color: var(--ada-black) !important;
}

/* === ENHANCED HEADING TYPOGRAPHY - FIXED === */
h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-heading);
    color: var(--primary-gold);
    font-weight: 600;
    margin-bottom: var(--space-md);
    
    /* FIXED: Remove any background gradients for readability */
    background: none !important;
    background-image: none !important;
    background-color: transparent !important;
    
    /* Optimized text wrapping for headings */
    text-wrap: balance;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: manual; /* Only break on explicit hyphens */
    
    /* Enhanced spacing and rendering */
    letter-spacing: var(--tracking-tight);
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "dlig" 1,   /* Discretionary ligatures */
        "case" 1,   /* Case-sensitive punctuation */
        "cpsp" 1;   /* Capital spacing */
    
    /* Improved line breaking */
    line-break: strict;
    word-break: keep-all;
    
    /* Better orphan/widow control */
    orphans: 2;
    widows: 2;
    page-break-after: avoid;
    break-after: avoid;
}

/* FIXED: Section titles - remove gradient backgrounds */
.section-title {
    background: none !important;
    background-image: none !important;
    background-color: transparent !important;
    color: var(--primary-gold) !important;
    text-shadow: none;
    
    /* Enhanced readability */
    font-weight: 600;
    letter-spacing: var(--tracking-tight);
    text-align: center;
    margin-bottom: var(--space-lg);
}

/* FIXED: Ensure animations don't interfere with readability */
.section-title.animate-on-scroll {
    background: none !important;
    background-image: none !important;
}

.section-title.in-view {
    background: none !important;
    background-image: none !important;
}

/* Override any shimmer animations on headings */
@keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
}

.section-title {
    animation: none !important;
}

/* Specific heading optimizations */
h1 {
    font-size: var(--font-5xl);
    line-height: var(--line-height-tight);
    letter-spacing: var(--tracking-tighter);
    max-width: var(--measure-narrow);
    margin: 0 auto var(--space-lg);
    background: none !important;
}

h2 {
    font-size: var(--font-4xl);
    line-height: var(--line-height-tight);
    letter-spacing: var(--tracking-tight);
    max-width: var(--measure-base);
    margin-bottom: var(--space-lg);
    background: none !important;
}

h3 {
    font-size: var(--font-3xl);
    line-height: var(--line-height-snug);
    max-width: var(--measure-base);
    margin-bottom: var(--space-md);
    background: none !important;
}

h4 {
    font-size: var(--font-2xl);
    line-height: var(--line-height-snug);
    max-width: var(--measure-wide);
    margin-bottom: var(--space-md);
    background: none !important;
}

h5 {
    font-size: var(--font-xl);
    line-height: var(--line-height-normal);
    max-width: var(--measure-wide);
    margin-bottom: var(--space-sm);
    background: none !important;
}

h6 {
    font-size: var(--font-lg);
    line-height: var(--line-height-normal);
    max-width: var(--measure-wide);
    margin-bottom: var(--space-sm);
    background: none !important;
}

/* === ENHANCED PARAGRAPH TYPOGRAPHY === */
p {
    font-family: var(--font-body);
    font-size: var(--font-base);
    line-height: var(--line-height-relaxed);
    color: var(--text-secondary);
    margin-bottom: var(--space-lg);
    
    /* Optimized reading experience */
    max-width: var(--measure-base);
    text-wrap: pretty;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    
    /* Enhanced typography features */
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "calt" 1,
        "onum" 1,   /* Old-style numbers in body text */
        "pnum" 1;   /* Proportional numbers */
    
    /* Improved spacing */
    letter-spacing: var(--tracking-normal);
    word-spacing: 0.1em;
    
    /* Better line breaking */
    line-break: auto;
    word-break: normal;
    
    /* Orphan and widow control */
    orphans: 2;
    widows: 3;
    page-break-inside: avoid;
}

/* Context-specific paragraph optimizations */
.hero-tagline,
.page-subtitle,
.section-subtitle {
    max-width: var(--measure-wide);
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    line-height: var(--line-height-relaxed);
    letter-spacing: var(--tracking-wide);
    word-spacing: 0.15em;
}

.legal-section p {
    max-width: none; /* Legal text needs full width */
    line-height: var(--line-height-loose);
    text-align: justify;
    text-justify: inter-word;
    hyphens: auto;
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "tnum" 1; /* Tabular numbers for legal text */
}

/* === ENHANCED LIST TYPOGRAPHY === */
ul, ol {
    margin: var(--space-lg) 0;
    padding-left: var(--space-xl);
    
    /* Better list spacing */
    line-height: var(--line-height-relaxed);
    
    /* Improved word breaking */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
}

li {
    margin-bottom: var(--space-md);
    line-height: var(--line-height-relaxed);
    
    /* Better text wrapping in list items */
    text-wrap: pretty;
    word-wrap: break-word;
    overflow-wrap: break-word;
    
    /* Orphan control */
    orphans: 2;
    widows: 2;
    page-break-inside: avoid;
}

/* Special handling for legal lists */
.legal-list li {
    text-align: justify;
    text-justify: inter-word;
    hyphens: auto;
    line-height: var(--line-height-loose);
}

/* === ENHANCED LINK TYPOGRAPHY === */
a {
    /* Improved readability for links */
    text-decoration: underline;
    text-decoration-thickness: 0.1em;
    text-underline-offset: 0.15em;
    text-decoration-skip-ink: auto;
    
    /* Better word breaking for links */
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: none; /* Don't hyphenate links */
    
    /* Enhanced typography */
    font-feature-settings: "kern" 1, "liga" 1;
}

a:hover, a:focus {
    text-decoration-thickness: 0.15em;
    text-underline-offset: 0.1em;
}

/* === ENHANCED QUOTE TYPOGRAPHY === */
blockquote {
    font-size: var(--font-lg);
    line-height: var(--line-height-relaxed);
    margin: var(--space-2xl) 0;
    padding: var(--space-xl);
    max-width: var(--measure-wide);
    
    /* Optimized quote typography */
    text-wrap: pretty;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
    
    /* Enhanced styling */
    font-style: italic;
    letter-spacing: var(--tracking-wide);
    word-spacing: 0.1em;
    
    /* Better orphan/widow control */
    orphans: 3;
    widows: 3;
    page-break-inside: avoid;
}

/* === ENHANCED FORM TYPOGRAPHY === */
label {
    font-size: var(--font-base);
    font-weight: 500;
    line-height: var(--line-height-normal);
    letter-spacing: var(--tracking-normal);
    
    /* Better label text wrapping */
    text-wrap: balance;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: manual;
}

input, textarea, select {
    font-family: var(--font-body);
    font-size: var(--font-base);
    line-height: var(--line-height-normal);
    letter-spacing: var(--tracking-normal);
    
    /* Form field typography */
    font-feature-settings: "kern" 1, "tnum" 1;
}

::placeholder {
    color: var(--text-muted);
    font-style: italic;
    letter-spacing: var(--tracking-normal);
}

/* === ENHANCED BUTTON TYPOGRAPHY === */
.btn {
    font-family: var(--font-body);
    font-size: var(--font-lg);
    font-weight: 600;
    line-height: var(--line-height-normal);
    letter-spacing: var(--tracking-wide);
    
    /* Button text optimization */
    text-wrap: nowrap;
    word-wrap: normal;
    overflow-wrap: normal;
    hyphens: none;
    
    /* Enhanced button typography */
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "case" 1,
        "cpsp" 1;
    
    text-transform: none;
    white-space: nowrap;
}

/* === ENHANCED NAVIGATION TYPOGRAPHY === */
.nav-link {
    font-size: var(--font-base);
    font-weight: 400;
    line-height: var(--line-height-normal);
    letter-spacing: var(--tracking-normal);
    
    /* Navigation text optimization */
    text-wrap: nowrap;
    word-wrap: normal;
    overflow-wrap: normal;
    hyphens: none;
    white-space: nowrap;
}

.navbar-brand {
    font-family: var(--font-heading);
    font-size: var(--font-3xl);
    font-weight: 700;
    line-height: var(--line-height-tight);
    letter-spacing: var(--tracking-wider);
    
    /* Brand text optimization */
    text-wrap: nowrap;
    word-wrap: normal;
    hyphens: none;
    white-space: nowrap;
    
    /* Luxury brand typography */
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "dlig" 1,
        "case" 1,
        "cpsp" 1;
}

/* === ENHANCED FOOTER TYPOGRAPHY === */
.footer {
    font-size: var(--font-sm);
    line-height: var(--line-height-relaxed);
    letter-spacing: var(--tracking-normal);
}

.footer h3, .footer h4 {
    line-height: var(--line-height-snug);
    letter-spacing: var(--tracking-normal);
    max-width: none;
    background: none !important;
}

.footer p {
    max-width: var(--measure-narrow);
    font-size: var(--font-sm);
    line-height: var(--line-height-relaxed);
}

/* === ENHANCED CARD TYPOGRAPHY === */
.stat-card, .portfolio-item, .testimonial-card {
    /* Card content typography */
    text-wrap: pretty;
    word-wrap: break-word;
    overflow-wrap: break-word;
    hyphens: auto;
}

.stat-value {
    font-family: var(--font-heading);
    font-size: var(--font-3xl);
    font-weight: 700;
    line-height: var(--line-height-tight);
    letter-spacing: var(--tracking-tight);
    
    /* Number display optimization */
    font-feature-settings: 
        "kern" 1,
        "tnum" 1,   /* Tabular numbers for stats */
        "case" 1;
    
    text-wrap: nowrap;
    word-wrap: normal;
    hyphens: none;
}

.stat-label {
    font-size: var(--font-lg);
    line-height: var(--line-height-normal);
    letter-spacing: var(--tracking-normal);
    text-wrap: balance;
}

/* === RESPONSIVE TYPOGRAPHY ENHANCEMENTS === */

/* Large Screens - Enhanced readability */
@media (min-width: 1200px) {
    body {
        font-size: var(--font-lg);
        line-height: var(--line-height-loose);
    }
    
    p {
        max-width: var(--measure-wide);
        line-height: var(--line-height-loose);
        word-spacing: 0.125em;
    }
    
    .legal-section p {
        column-count: 1;
        column-gap: var(--space-2xl);
        text-align: justify;
        text-justify: inter-word;
    }
}

/* Medium Screens - Balanced approach */
@media (max-width: 1199px) and (min-width: 768px) {
    p {
        max-width: var(--measure-base);
        line-height: var(--line-height-relaxed);
    }
    
    h1, h2 {
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        background: none !important;
    }
}

/* Small Screens - Optimized for mobile reading */
@media (max-width: 767px) {
    :root {
        --line-height-tight: 1.25;
        --line-height-snug: 1.35;
        --line-height-normal: 1.5;
        --line-height-relaxed: 1.6;
        --line-height-loose: 1.7;
    }
    
    body {
        line-height: var(--line-height-relaxed);
        word-spacing: 0.05em;
    }
    
    p {
        max-width: none;
        text-align: left;
        hyphens: auto;
        word-spacing: 0.05em;
    }
    
    h1, h2, h3, h4, h5, h6 {
        max-width: none;
        text-align: center;
        margin-left: auto;
        margin-right: auto;
        hyphens: manual;
        word-break: normal;
        background: none !important;
    }
    
    .legal-section p {
        text-align: left;
        text-justify: none;
        hyphens: auto;
        line-height: var(--line-height-relaxed);
    }
    
    blockquote {
        font-size: var(--font-base);
        text-align: left;
        margin: var(--space-lg) 0;
        padding: var(--space-lg);
    }
    
    /* USA Callout mobile optimization */
    .usa-callout {
        font-size: var(--font-xs);
        padding: 0.5rem 1rem;
        min-height: 44px;
    }
}

/* Extra Small Screens - Maximum readability */
@media (max-width: 480px) {
    body {
        hyphens: auto;
        word-spacing: 0.03em;
    }
    
    p {
        hyphens: auto;
        word-spacing: 0.03em;
        line-height: var(--line-height-loose);
    }
    
    .btn {
        font-size: var(--font-base);
        letter-spacing: var(--tracking-normal);
        text-wrap: balance;
        word-wrap: break-word;
        white-space: normal;
        text-align: center;
        line-height: var(--line-height-snug);
        padding: var(--space-md) var(--space-lg);
    }
    
    .navbar-brand {
        font-size: var(--font-2xl);
        letter-spacing: var(--tracking-normal);
    }
    
    /* USA Callout extra small screens */
    .usa-callout {
        font-size: var(--font-xs);
        padding: 0.5rem;
        flex-direction: column;
        gap: 0.25rem;
    }
    
    .usa-callout span {
        font-size: var(--font-xs);
    }
}

/* === ADVANCED TYPOGRAPHY FEATURES === */

/* Better handling of numbers and symbols */
.price, .stat-value, .percentage {
    font-feature-settings: 
        "kern" 1,
        "tnum" 1,   /* Tabular numbers */
        "lnum" 1,   /* Lining numbers */
        "case" 1;   /* Case-sensitive symbols */
}

/* Enhanced date formatting */
.date, .timestamp {
    font-feature-settings: 
        "kern" 1,
        "tnum" 1,
        "lnum" 1;
    font-variant-numeric: tabular-nums lining-nums;
}

/* Improved contact information */
.contact-info, .address {
    font-feature-settings: 
        "kern" 1,
        "liga" 1,
        "tnum" 1; /* For phone numbers */
}

/* === ACCESSIBILITY ENHANCEMENTS === */

/* High contrast mode improvements */
@media (prefers-contrast: high) {
    body {
        line-height: var(--line-height-loose);
        letter-spacing: var(--tracking-wide);
        word-spacing: 0.15em;
    }
    
    h1, h2, h3, h4, h5, h6 {
        letter-spacing: var(--tracking-normal);
        word-spacing: 0.1em;
        background: none !important;
    }
    
    a {
        text-decoration-thickness: 0.15em;
        text-underline-offset: 0.2em;
    }
    
    /* Enhanced USA callout for high contrast */
    .usa-callout {
        background-color: var(--ada-white);
        color: var(--ada-black);
        border: 2px solid var(--ada-black);
    }
    
    .usa-callout span {
        color: var(--ada-black) !important;
        font-weight: 700;
    }
}

/* Reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
    * {
        text-rendering: optimizeSpeed;
    }
    
    /* Remove animations that might interfere */
    .section-title {
        animation: none !important;
    }
}

/* === PRINT OPTIMIZATIONS === */
@media print {
    body {
        font-size: 12pt;
        line-height: 1.5;
        color: black;
        background: white;
        hyphens: auto;
    }
    
    h1, h2, h3, h4, h5, h6 {
        color: black;
        background: none !important;
        page-break-after: avoid;
        break-after: avoid;
        orphans: 3;
        widows: 3;
    }
    
    p {
        orphans: 3;
        widows: 3;
        text-align: justify;
        text-justify: inter-word;
    }
    
    a {
        color: black;
        text-decoration: underline;
    }
    
    blockquote {
        page-break-inside: avoid;
        break-inside: avoid;
    }
    
    .usa-callout {
        background: white;
        color: black;
        border: 1px solid black;
    }
}

/* === LANGUAGE-SPECIFIC OPTIMIZATIONS === */

/* Better support for different languages */
:lang(en) {
    hyphens: auto;
    word-break: normal;
    line-break: auto;
}

/* Handle long URLs and email addresses */
.url, .email, code, .monospace {
    word-break: break-all;
    overflow-wrap: anywhere;
    hyphens: none;
    font-feature-settings: "kern" 0, "liga" 0;
}

/* === CONTENT-SPECIFIC OPTIMIZATIONS === */

/* Testimonial text */
.testimonial-content blockquote {
    text-wrap: pretty;
    quotes: """ """ "'" "'";
    hanging-punctuation: first last;
}

/* FAQ content */
.faq-answer p {
    text-wrap: pretty;
    max-width: var(--measure-wide);
    line-height: var(--line-height-relaxed);
}

/* Service features and benefits */
.service-features li,
.benefits-grid .benefit-item {
    text-wrap: balance;
    line-height: var(--line-height-normal);
    word-spacing: 0.05em;
}

/* Portfolio descriptions */
.portfolio-content p {
    text-wrap: pretty;
    max-width: var(--measure-base);
    line-height: var(--line-height-relaxed);
    hyphens: auto;
}

/* Team member descriptions */
.team-member-description {
    text-wrap: pretty;
    max-width: var(--measure-base);
    line-height: var(--line-height-relaxed);
    text-align: justify;
    text-justify: inter-word;
    hyphens: auto;
}

/* === FINAL POLISH === */

/* Ensure consistent spacing */
* + h1, * + h2, * + h3, * + h4, * + h5, * + h6 {
    margin-top: var(--space-2xl);
}

/* Better handling of empty elements */
p:empty, li:empty {
    display: none;
}

/* Improved focus states for typography */
*:focus {
    outline-offset: 0.2em;
}

/* Enhanced selection styling */
::selection {
    background: rgba(212, 175, 55, 0.3);
    color: var(--text-primary);
}

::-moz-selection {
    background: rgba(212, 175, 55, 0.3);
    color: var(--text-primary);
}

/* === CRITICAL FIXES FOR SPECIFIC ISSUES === */

/* Fix for any remaining gradient backgrounds on headings */
h1[style*="background"], 
h2[style*="background"], 
h3[style*="background"], 
h4[style*="background"], 
h5[style*="background"], 
h6[style*="background"] {
    background: none !important;
    background-image: none !important;
    background-color: transparent !important;
}

/* Specific fix for legacy title */
#legacy-title {
    background: none !important;
    background-image: none !important;
    background-color: transparent !important;
    animation: none !important;
}

/* Override any shimmer or gradient animations */
.shimmer,
[class*="shimmer"] {
    background: none !important;
    background-image: none !important;
    animation: none !important;
}

/* Ensure USA callout always has proper contrast */
.usa-callout,
.usa-callout * {
    color: var(--ada-black) !important;
    text-shadow: none !important;
    background-color: var(--ada-white) !important;
    background-image: none !important;
    background: var(--ada-white) !important;
}

/* Focus states for accessibility */
.usa-callout:focus,
.usa-callout:focus-within {
    outline: 2px solid var(--ada-black);
    outline-offset: 2px;
}

/* Ensure all icons in USA callout are visible */
.usa-callout i,
.usa-callout .fas,
.usa-callout .far,
.usa-callout .fab {
    color: var(--ada-black) !important;
}
